
<div class="modal-backdrop">
    <aside class="task-modal d-flex flex-column bv-radius-4">
        <!-- HEADER -->
        <header class="task-modal__header d-flex align-items-center gap-5">
          <div class="task-path">
            <span class="task-path__parent"></span> /
            <span class="task-path__current">CCS-3</span>
          </div>
      
          <h2 class="task-title">
            <span class="state-badge state-badge--lightning"></span>
            {{taskD?.title}}
          </h2>
      
          <button class="task-modal__close">âœ•</button>
        </header>
      
        <div class="task-modal__body d-flex">
         
          <section class="task-content d-flex flex-column gap-5">
          <!--
            
          <div class="task-actions">
            <button class="btn bv-radius-2"> Add</button>
            <button class="btn bv-radius-2">âš¡ Apps</button>
          </div>
    
          
          --> 
        <article class="task-section">
          <h3 class="task-section__title">Description</h3>

          <div *ngIf="!isEditingDescription" (click)="toggleEditDescription($event)">
            <p class="task-description">{{ taskD?.description }}</p>
          </div>

    <div *ngIf="isEditingDescription">
  <input 
    type="text"
    [(ngModel)]="updatedDescription"
    class="task-description-input" />

  <div class="edit-actions d-flex gap-2 mt-2">
    <button class="btn--success" (click)="saveDescription()">âœ”</button>
    <button class="btn--danger" (click)="cancelDescriptionEdit($event)">âœ–</button>
  </div>
</div>

            </article>    
            <nav class="tabs">
              <button class="tab is-active">Comments</button>
              <button class="tab">History</button>
              <button class="tab">Work log</button>
            </nav>
      
            <div class="tab-panel">
              <textarea class="comment-box" rows="4" placeholder="Add a commentâ€¦"></textarea>
              <div class="comment-quick">
                <button class="chip">Who is working on thisâ€¦?</button>
                <button class="chip">Status updateâ€¦</button>
                <button class="chip">Thanksâ€¦</button>
              </div>
              <p class="hint">Pro tip: press <kbd>M</kbd> to comment</p>
            </div>
          </section>
      
          <!-- RIGHT : DETAILS -->
          <aside class="task-sidebar">
           <div class="state-dropdown d-flex justify-content-between">
            <select
              class="state-dropdown__btn"
              [ngModel]="taskD?.status"
              (ngModelChange)="updateStatus($event)">
              <option *ngFor="let s of statusList" [value]="s.value">
                {{ s.label }}
              </option>
            </select>
            <div class="delete-task d-flex justify-content-center align-items-center" (click)="deleteTask()">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>
            </div>
      </div>

      
            <div class="pinned-fields">
              <h4 class="panel-heading">Pinned fields</h4>
              <p class="text-muted">Click on the ðŸ“Œ next to a field label to start pinning.</p>
            </div>
      
            <ul class="details-panel">
              <li class="details-field">
                <span class="details-label">Assignee</span>

                <span *ngIf="!taskD?.assignedUserId" class="details-value">Unassigned <div (click)="assignTaskToMe()" class="link">Assign to me</div></span>
                <span *ngIf="taskD?.assignedUserId" class="details-value"><a class="link">{{assignedUserName}}</a></span>
              </li>
              <li class="details-field">
                <span class="details-label">Labels</span>
                <span class="details-value text-muted">None</span>
              </li>
              <li class="details-field">
                <span class="details-label">Parent</span>
                <span class="details-value link link--purple">âš¡ CCS-2 (Sample) Chatbot Developer</span>
              </li>
              <li class="details-field">
                <span class="details-label">Reporter</span>
                <span class="details-value">
                 {{reporterName}}
                </span>
              </li>
            </ul>
      
            <section class="automation-panel">
              <h4 class="panel-heading">Automation</h4>
              <p class="text-muted">Rule executions</p>
            </section>
      
            <footer class="sidebar-footer">
              <small class="text-muted">Created yesterday</small>
              <small class="text-muted">Updated yesterday</small>
            </footer>
          </aside>
        </div>
      </aside>
</div>


